#*
AnyValue withAllSubtypesDo: {:each |
    printLine(each)
}.
*#

##printLine("Function bytecodes ", FunctionBytecode allInstances size).

printLine(Untyped).
printLine(Untyped __type__).

printLine(AnyValue).
printLine(AnyValue __type__).

printLine(Type supertype).
printLine(Type supertype supertype).
printLine(Type supertype supertype supertype).

printLine(1 perform: #+ with: 2).

public class TestClass superclass: Object; definition: {
    protected field first => Int32.
    protected field second => Int32.

    public method initialize => Void := {
        tuple: self slotNamedAt: #first put: 1i32.
        tuple: self slotNamedAt: #second put: (tuple: self slotNamedAt: #first) + 1i32.
    }.

    public method mySecond => Int32 
        := tuple: self slotNamedReferenceAt: #second.
}.

printLine((TestClass >> #initialize) definition bytecode fullPrintString).
printLine((TestClass >> #mySecond) definition bytecode fullPrintString).

let testObject := TestClass new.
tuple: testObject slotNamedAt: #first put: 4i32.
tuple: testObject slotNamedAt: #second put: (tuple: testObject slotNamedAt: #first) + 1i32.
printLine(tuple: testObject slotNamedAt: #first).
printLine(tuple: testObject slotNamedAt: #second).

printLine(tuple: TestClass new slotNamedAt: #first).
##printLine(TestClass new first).
printLine(TestClass new mySecond).

